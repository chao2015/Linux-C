#mmap文件映射

>函数原型

```c
<sys/mman.h>
void* mmap(void* start,size_t length,int prot,int flags,int fd,off_t offset);  

int munmap(void* start,size_t length);
```

+ 1.start：映射区的开始地址，设置为0时表示由系统决定映射区的起始地址。
+ 2.length：映射区的长度。//长度单位是 以字节为单位，不足一内存页按一内存页处理
+ 3.prot：期望的内存保护标志，不能与文件的打开模式冲突。是以下的某个值，可以通过or运算合理地组合在一起

> + PROT_EXEC //页内容可以被执行  
> + PROT_READ //页内容可以被读取  
> + PROT_WRITE //页可以被写入  
> + PROT_NONE //页不可访问  

+ flags：指定映射对象的类型，映射选项和映射页是否可以共享。它的值可以是一个或者多个以下位的组合体

> + MAP_FIXED //使用指定的映射起始地址，如果由start和len参数指定的内存区重叠于现存的映射空间，重叠部分将会被丢弃。如果指定的起始地址不可用，操作将会失败。并且起始地址必须落在页的边界上。
> + MAP_SHARED //与其它所有映射这个对象的进程共享映射空间。对共享区的写入，相当于输出到文件。直到msync()或者munmap()被调用，文件实际上不会被更新。
> + MAP_PRIVATE //建立一个写入时拷贝的私有映射。内存区域的写入不会影响到原文件。这个标志和以上标志是互斥的，只能使用其中一个。
> + ...

+ 4.fd：有效的文件描述词。一般是由open()函数返回，其值也可以设置为-1，此时需要指定flags参数中的MAP_ANON,表明进行的是匿名映射。
+ 5.off_toffset：被映射对象内容的起点。
  
+ mmap()成功执行时，返回被映射区的指针；失败时，返回MAP_FAILED[其值为(void *)-1]。
+ munmap()成功执行时，返回0；失败时，返回-1。